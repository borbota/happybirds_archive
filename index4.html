<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>happybirds</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/scrolling-nav.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">happybirds</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#intro">intro</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#ml">iterations</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#insights_1">insights</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#insights_2">topics</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#insights_3">URLs</a>
            </li>

          </ul>
        </div>
      </div>
    </nav>

        <!-- <header class="bg-primary text-white"> -->
    <header style="background: url('img/sky_image_358.JPG')"
      <div class="container text-center">
        <h1>happybirds</h1>
        <p class="lead">university project archive</p>
      </div>
    </header>

    <section id="intro">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>Introduction</h2>
            <!-- <p class="lead"> -->
            <p class="lead"; align="justify">This site is the project documentation of the happybirds team for the capstone project for the postgraduate Data science and big data course of the University of Barcelona (more information about the program <a href="http://www.ub.edu/datascience/postgraduate/">here</a>). The tasks were to develop a machine learning algorithm for an annotated dataset and to analyze the dataset for insights. Hereby we present what our team did and what technologies we have used.</p>
            
            <p align="justify">For the solution presented below, we have developed a project in python that has all the tools needed to run the necessary phases to import, transform, train, validate, test and optimize for a tweet sentiment classification. All codes are available in <a href="https://github.com/jsantalo/happybirds/">this Github repository</a>.</p>
            
            <p align="justify">The problem to be solved is an airline sentiment tweet classification. The teams of the postraduate course received two datasets: one with English tweets already classified and a second one in Spanish – to be classified by the students of the postgraduate course on a platform designed for this task.</p>

            <p align="justify">The main motivation on working on a python project instead on doing it in a lengthy Jupyter Notebook was the flexibility a project has in terms of code sharing. Versioning a Jupyter Notebook can potentially be a bad idea taking into account that it stores all the results within. As a consequence, each time a team member re-executes even just one cell locally, Git recognises it as a change and asks to commit it. There is a way to avoid this phenomenon by resetting the notebook output each time a team member pulls or pushes changes. However, this can easily be forgotten causing a subsequent chaos. Having a final version as a python project enables any team member to execute the parts in the way she prefers. Also, it allows team members to go as deep as they want if the code is correctly modularized. Finally, each team member has the chance to do this call by using her own Jupyter Notebook, iPython or even directly from the developing tool.</p>

            <p align="justify">The sections below cover the in-depth description of the steps taken towards the final solution in a chronological order, the results obtained, and the next steps that could have been potentially done on the Spanish dataset.</p>


            <p>The project documentation covers the following:</p>
            <ul>
              <li>Machine learning project iterations</li>
              <li>Description of the dataset</li>
              <li>Topic modelling</li>
              <li>Analysis of URLs</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section id="ml" class="bg-light">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>Project iterations</h2>
            <h4>Example code playground and architecture project definition</h4>

            <p>lorem ipsum</p>

            <div style="width:image width px; font-size:80%; text-align:center;">
            <img src="img/capstone_project_flow.png" alt="capstone_project_flow" width="700" height="500">
            Project flow</div>
          </div>
        </div>
      </div>
    </section>

    <section id="insights_1">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>Insights</h2>
            <p class="lead">Ad hoc analysis of an unbalanced dataset, or What was wrong with Iberia?</p>
            <p align="justify">The Spanish tweets dataset contains 7867 tweets from October 25, 2017 to January 8, 2018 downloaded using the keywords AirEurope, Spanair, Ryanair, Iberia, Aireurope, and Norwegianairline. As discussed above, the tweets' sentiments were annotated by the students of the postgrad course. The 48.1 percent of the tweets were annotated as negative, 32.5 percent as neutral, and 19.4 percent as positive. The chart below shows the distribution of the number of tweets by each sentiment by day. The day with the highest traffic was December 14, 2017 – most of the tweets issued being negative.</p>
            <p><p/>
            <div style="width:image width px; font-size:80%; text-align:center;">
              <img src="img/sentiment_timeline_ES.png" alt="sentiment timeline" width="700" height="300">
            Distribution of sentiments by day</div>
            <p><p/>
            <p align="justify">If we look for the airlines mentioned, we see that it was Iberia, which was mentioned mostly on December 14, 2017. Actually, out of all airlines, mostly Iberia and Ryanair were mentioned in the tweets. Alltogether Iberia was mentioned 5100 times, whiel Ryanair 1938 and Vueling 204 times. All the rest were way below 200 mentions in the analyzed period. Thus we are focusing on Iberia.</p>
            <p><p/>
            <img src="img/airlines_by_day_ES_original_colors.png" alt="airline_mentions_by_day" width="700" height="300">
             <div style="width:image width px; font-size:80%; text-align:center;">
            Mentions of airlines by day</div>
            <p><p/>
            <p align="justify">But in what context were the airlines mentioned? The table below shows the rank of each word in terms of number of ocurrence by airline. The word "url" are used after having all links replaced by the word "url". We will discuss later what could be the reason of having so many urls in the tweets.<p/>
<div style="width:image width px; font-size:80%; text-align:center;">            
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;border-color:#ccc;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;}
.tg .tg-c3ow{border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-7btt{font-weight:bold;border-color:inherit;text-align:center;vertical-align:top}
.tg .tg-abip{background-color:#f9f9f9;border-color:inherit;text-align:center;vertical-align:top}
</style>
<table class="tg" style="undefined;table-layout: fixed; width: 483px"; align = "center">
<colgroup>
<col style="width: 85px">
<col style="width: 96px">
<col style="width: 96px">
<col style="width: 100px">
<col style="width: 106px">
</colgroup>
  <tr>
    <th class="tg-7btt">rank</th>
    <th class="tg-7btt">Iberia</th>
    <th class="tg-7btt">Ryanair</th>
    <th class="tg-7btt">Vueling</th>
    <th class="tg-7btt">Spanair</th>
  </tr>
  <tr>
    <td class="tg-abip">1</td>
    <td class="tg-abip">@iberia</td>
    <td class="tg-abip">ryanair</td>
    <td class="tg-abip">url</td>
    <td class="tg-abip">spanair</td>
  </tr>
  <tr>
    <td class="tg-c3ow">2</td>
    <td class="tg-c3ow">url</td>
    <td class="tg-c3ow">url</td>
    <td class="tg-c3ow">@vueling</td>
    <td class="tg-c3ow">url</td>
  </tr>
  <tr>
    <td class="tg-abip">3</td>
    <td class="tg-abip">iberia</td>
    <td class="tg-abip">@ryanair</td>
    <td class="tg-abip">vueling</td>
    <td class="tg-abip">accidente</td>
  </tr>
  <tr>
    <td class="tg-c3ow">4</td>
    <td class="tg-c3ow">vuelo</td>
    <td class="tg-c3ow">pilotos</td>
    <td class="tg-c3ow">@iberia</td>
    <td class="tg-c3ow">españa</td>
  </tr>
  <tr>
    <td class="tg-abip">5</td>
    <td class="tg-abip">hola</td>
    <td class="tg-abip">huelga</td>
    <td class="tg-abip">iberia</td>
    <td class="tg-abip">video</td>
  </tr>
  <tr>
    <td class="tg-c3ow">6</td>
    <td class="tg-c3ow">solo</td>
    <td class="tg-c3ow">vuelos</td>
    <td class="tg-c3ow">ryanair</td>
    <td class="tg-c3ow">vuelo</td>
  </tr>
  <tr>
    <td class="tg-abip">7</td>
    <td class="tg-abip">gracias</td>
    <td class="tg-abip">vuelo</td>
    <td class="tg-abip">@ryanair</td>
    <td class="tg-abip">letal</td>
  </tr>
  <tr>
    <td class="tg-c3ow">8</td>
    <td class="tg-c3ow">mejor</td>
    <td class="tg-c3ow">españa</td>
    <td class="tg-c3ow">compañía</td>
    <td class="tg-c3ow">cadas</td>
  </tr>
  <tr>
    <td class="tg-abip">9</td>
    <td class="tg-abip">destino</td>
    <td class="tg-abip">avión</td>
    <td class="tg-abip">vuelo</td>
    <td class="tg-abip">barajas</td>
  </tr>
  <tr>
    <td class="tg-c3ow">10</td>
    <td class="tg-c3ow">madrid</td>
    <td class="tg-c3ow">euros</td>
    <td class="tg-c3ow">vuelos</td>
    <td class="tg-c3ow">canal</td>
  </tr>
</table>
Most frequently used words by airline</div>
<p></p>
<p align="justify">Most of the airlines are mentioned using the "@" sign in the tweets suggesting that by using Twitter's organic mention sign people wanted to communicate with the airline companies – except for Spanair, but it is reasonable to expect from a defunct company. The extensive use of "@"s is especially true for Iberia being @iberia the most frequently used word related to Iberia. Nevertheless, all other words at Iberia do not seem to have negative connotation. As for Ryanair, we see that probably a strike was going on (maybe that of pilots?), where flights were cancelled. As for Vueling, practically this company was mentioned related to the other airlines, we can see that both Ryanair and Iberia were mentioned along with Vueling. Spanair appeared as the accident had the anniversary.<p/>
<p></p>
<p align = "justify">Now that we have a broad picture of our dataset, in order to understand exactly what has happened to Iberia, we take a dive into text analysis.</p>
          </div>
        </div>
      </div>
    </section>

        <section id="insights_2" class="bg-light">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>Topic modelling</h2>
            <p align = "justify">For a greater depth about the tweets, we decided to use a topic modelling algorithm. The analysis was done with a conventional Latent Dirichlet Allocation (LDA) model in order to extract the volume and percentage contribution of each topic to get an idea of how important a topic is. Using the tool of LDA we get the following interactive visualization.</p>
            <div style="width:image width px; font-size:80%; text-align:center;">
            <iframe src="https://borbota.github.io/jatszos/UB/lda.html" width="1200" height="500" frameborder="1" style="margin-left: -200px">
             </iframe> 
            Topic modelling using LDA and LDAvis</div>
            <p></p>
            <p align = "justify">The Coherence score was used to select appropriate number of topics. After several runs it was decided to let it at 20 topics. Some of the topics are a little bit overlapped but the important and different ones appear clearly separated.</p>
            <p class="lead"; align="justify">Inferring the topics from keywords</p>
            <p align = "justify">After looking into all the keywords in the above graph the following topic names were deduced. For each tweet, a dominant topic was assigned. Tweets with a Topic probability lower than 20 percent were left uncategorized. When doing topic modelling, the topics are usually not 100 percent clean and clear, thus we have left some question marks in the picture below presenting the topics.</p>
            <div style="width:image width px; font-size:80%; text-align:center;">
              <img src="img/inferring_topics.png" alt="topics and names" width="700" height="400">
            Topics and their respective keywords</div>
            <p class="lead"; align="justify">Iberia</p>
            <p align = "justify">In the following plot all the topics and the percent of appearances are plotted. The X axis represents Iberia percentage and the Y axis represents the percentage from all the other companies together. Topics below the line are more important in Iberia dataset and topics above the line are more important for the other airlines.</p>
            <div style="width:image width px; font-size:80%; text-align:center;">
              <img src="img/iberia_graph.png" alt="Iberia graph" width="700" height="400">
            Topics of Iberia vs. all other companies</div>
            <p>The most relevant topics in Iberia are:
              <ul>
              <li>Topic 9 → #HolaDestino campaign;</li>
              <li>Topic 7 → 25 anniversary of IberiaPlus;</li>
              <li>Topic 0 → Iberia is 90 years old.</li>
            </ul>
            For each day every dominant topic is plotted in the graph below showing the timeline analysis of Iberia's most dominant topics.
            </p>
            <div style="width:image width px; font-size:80%; text-align:center;">
              <img src="img/iberia_timeline.png" alt="Iberia graph" width="700" height="400">
            Timeline of Iberia's most dominant topics by day</div>
            <p>The chart suggests that:
              <ul>
              <li>The publicity campaign #holaDestino (topic 9) started on November 14 and finished on December 2.</li>
              <li>The publicity campaign of the 25 years of IberiaPlus (topic 7) started on December 11 and finished on December 23. </li>
              <li>On December 14, the most important topic is the 90th anniversary of Iberia (topic 0).</li>
            </ul>
            Thus, in conclusion what happened in December 14 is the anniversary of Iberia. More information about this campagin click <a href="https://www.iberia.com/es/90-aniversario/">here</a>. It can be seen that Iberia invests a lot of time and effort to continuously have active campaigns, good and positive news. 
          </p>

          <p class="lead"; align="justify">Ryanair</p>
          <p align = "justify">Similarly, we had a look at the words used related to Ryanair vs. all other companies.</p>
          <div style="width:image width px; font-size:80%; text-align:center;">
            <img src="img/ryanair_graph.png" alt="Iberia graph" width="700" height="400">
            Topics of Ryanair vs. all other companies</div>
          <p>the most relevant topics in Ryanair are:
            <ul>
              <li>Topic 8 → call strike;</li>
              <li>Topic 12 → cancel strike;</li>
              <li>Topic 16 → trip sales;</li>
              <li>Topic 14 + Topic 13 → new hand luggage policy.</li>
            </ul>
            <p/>
            <div style="width:image width px; font-size:80%; text-align:center;">
            <img src="img/ryanair_timeline.png" alt="Iberia graph" width="700" height="400">
            Timeline of Ryanair's most dominant topics by day</div>
            <p align = "justify">The timeline analysis indicates the strike call was around December 11 and December 17. The strike was cancelled around December 18 and December 20. See more information <a href = "https://www.telegraph.co.uk/travel/news/ryanair-strike-flight-cancellations-your-rights/">here.</a></p>
            <p align = "justify">From October 25 to October 27 Ryanair delayed to January its new hand luggage policy, see more information <a href = "https://corporate.ryanair.com/news/new-cabin-bag-policy-delayed-until-mid-jan-2018/">here</a>.</p>


          </div>
        </div>
      </div>
    </section>

        <section id="insights_3">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>Analysis of URLs</h2>
            <p class="lead">and if needed, even more</p>
            

          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-5 bg-dark">
      <div class="container">
        <p class="m-0 text-center text-white">The members of the happybirds team are <a href="https://github.com/borbota">borbota</a>, <a href="https://github.com/jsantalo">jsantalo</a>, <a href="https://github.com/ldescampsvila">ldescampsvila</a>, and <a href="https://github.com/maytepenella">maytepenella</a>.
        </p>
        <p></p>
        <p class="m-0 text-center text-white">Copyright &copy; happybirds 2018</p>
      </div>
      <!-- /.container -->
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom JavaScript for this theme -->
    <script src="js/scrolling-nav.js"></script>

  </body>

</html>
